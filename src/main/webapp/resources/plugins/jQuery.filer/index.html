<!DOCTYPE>
<html lang="html" ng-app="myApp">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>jQuery Filer 1.0.5 | CreativeDream</title>
    
	<!--Stylesheets-->
	<link href="css/jquery.filer.css" type="text/css" rel="stylesheet" />
	<link href="css/themes/jquery.filer-dragdropbox-theme.css" type="text/css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="fancybox/source/jquery.fancybox.css?v=2.1.5">
    <link rel="stylesheet" type="text/css" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5">

    <script type="text/javascript" src="js/angular.js"></script>
	<!--jQuery-->
	<script type="text/javascript" src="js/jquery.min.js"></script>

    <script type="text/javascript" src="fancybox/source/jquery.fancybox.js?v=2.1.5"></script>
    <script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>

	<script type="text/javascript" src="js/jquery.filer.js?v=1.0.5"></script>
	<script type="text/javascript" src="js/custom.js?v=1.0.5"></script>
    
	<!--[if IE]>
          <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

</head>

<body ng-controller="Ctrl">
    
    <div id="content" my-filter>
        <h2>Restaurant</h2>
        <input type="file" name="files[]" id="restGallery" multiple="multiple">
        <h1 ng-click="show()">Show</h1>
    </div>

    <div id="content">
        <h2>Menu</h2>
        <input type="file" name="files[]" id="menuGallery" multiple="multiple">
    </div>

    </body>
    <script type="text/javascript" src="js/custom.js?v=1.0.5"></script>

    <script type="text/javascript">
        var app = angular.module('myApp', []);
        app.controller('Ctrl', function ($scope) {
                        $scope.sample1 = [
                {
                    id  : 10,
                    name: "1",
                    type: "image/jpg",
                    size: '',
                    file: "http://www.gettyimages.com/gi-resources/images/Homepage/Hero/US/MAR2016/prestige-587705839_full.jpg"
                },
                {
                    id  : 20,
                    name: "2",
                    size: '',
                    type: "image/jpg",
                    file: "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQt3XVxyI5sLL8f1_vPQkAxGRBIfYa6e4lESTqVQk3j_JN_O0M6LA"
                }
            ];

            $scope.sample2 = [
                {
                    id  : 30,
                    name: "3",
                    type: "image/jpg",
                    size: '',
                    file: "https://3.bp.blogspot.com/-W__wiaHUjwI/Vt3Grd8df0I/AAAAAAAAA78/7xqUNj8ujtY/s1600/image02.png"
                },
                {
                    id  : 40,
                    name: "4",
                    size: '',
                    type: "image/jpg",
                    file: "https://i.kinja-img.com/gawker-media/image/upload/s--BVBooEGz--/c_scale,fl_progressive,q_80,w_800/vjamorotezzukhdvpccc.jpg"
                }
            ];

            $scope.show = function(){
                console.log('Rest File', newFiles['restGallery']);
                console.log('Rest Deleted Image', deletedImageIDs['restGallery']);
                console.log('Menu File', newFiles['menuGallery']);
                console.log('Menu Deleted', deletedImageIDs['menuGallery']);
            }
        });

        app.directive('myFilter', [function() {
            return {
                restrict: 'A',       
                link: function(scope, element) {
                    // wait for the last item in the ng-repeat then call init
                    angular.element(document).ready(function() {
                        initJqueryFiler(['#restGallery', '#menuGallery'], [scope.sample1, scope.sample2]);
                    });
                    // OR use $braodcast & $on in Controller
                }
            };
            /**** Usable array ****/
            // If your input file, id = '#gallery' use:
            // => newFiles['gallery']
            // => deletedImageIDs['gallery']

        }]);
            
    </script>

    

    <script type="text/javascript">
        $(".filer-fancybox").fancybox({
                padding: 0,

                openEffect : 'elastic',
                openSpeed  : 150,

                closeEffect : 'elastic',
                closeSpeed  : 150,

                closeClick : true,

                helpers : {
                    overlay : null
                }
            });
    </script>

</html>